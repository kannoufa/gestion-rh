{% extends 'user/slide.html.twig' %}

{% block title %}
    Messagerie
{% endblock %}
{% block body %}  
<center><img src="{{asset('assets/images/logo.png')}}" style="align: right; " width="370px"></center>
        <hr>
        <h1>Messagerie</h1>
            <a href="{{ path('send') }}" class="btn btn-danger btn-sm">
                    <i class="fa fa-plus" aria-hidden="true"></i> Nouveau message
            </a>
    <table class="table table-striped table-hover">
                            <tbody>
							{% for message in app.user.received %} 
                              <tr class="unread">
                                  <td class="inbox-small-cells">
                                
                                   <a href="{{ path("delet", {id: message.id}) }}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-file-excel-fill text-danger" viewbox="0 0 16 16">
                            <path d="M12 0H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zM5.884 4.68L8 7.219l2.116-2.54a.5.5 0 1 1 .768.641L8.651 8l2.233 2.68a.5.5 0 0 1-.768.64L8 8.781l-2.116 2.54a.5.5 0 0 1-.768-.641L7.349 8 5.116 5.32a.5.5 0 1 1 .768-.64z"/>
                        </svg>
                    </a>

                                      
                                  </td>
                                  <td class="view-message  dont-show">{{ message.title }}</td>
                                  <td class="view-message  dont-show">De : {{ message.sender.username }}</td>
                                  <td class="view-message ">
                                    {% if message.title == 'Demande validation : Ordre de mission' %}
                                        <a href="{{ path('user_document', {repo: 'OrdreMission', id: message.message}) }}">
                                            Voir la demande
                                        </a>
                                    {% elseif message.title == 'Demande validation : Absence' %}
                                        <a href="{{ path('user_document', {repo: 'Absence', id: message.message}) }}">
                                            Voir la demande
                                        </a>
                                    {% elseif message.title == 'Demande de remplir la fiche de renseignement' %}
                                        <a href="{{ path('user_document', {repo: 'OrdreMission', id: message.message}) }}">
                                            Remplir la fiche
                                        </a>
                                    {% else %}
                                        <a href="{{ path("read", {id: message.id}) }}">Lire le message</a>
                                    {% endif %}
                                </td>
                                  <td class="view-message  inbox-small-cells"><i class="fa fa-paperclip"></i></td>
                                  <td class="view-message  text-right">{{ message.createdAt|date }}</td>
                              </tr>
                              {% endfor %}
                          </tbody>
                          </table>

                      </div>
                  </aside>
              </div>
</div>


{% endblock %}
